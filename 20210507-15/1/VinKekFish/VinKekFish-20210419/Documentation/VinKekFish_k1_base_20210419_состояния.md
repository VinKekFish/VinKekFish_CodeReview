ФАЙЛ ДЛЯ АНАЛИЗА


1. Обратить особое внимание на то, что у объектов есть состояния "не инициализирован", "очищен"  и "уничтожен"
	Состояния помечены меткой 2BPxXXosRz9E
	Такие состояния имеются
	
1.1. Желательно, чтобы эти состояния были в одной группе
	Группа 2
	
1.2.1. Из состояния "уничтожен" не должно быть выходов
	Помечено меткой plSB14TkkHty
	Нет выходов
	
1.2.2. "Уничтожен" должно быть конечным состоянием (декларировано как конечное).
	NwQt5AuXPfr9
	Декларировано как конечное

1.2.3. В это состояние можно попасть напрямую или опосредованно из любого другого состояния без проведения каких-либо операций, не соответствующих семантике очистки/уничтожения (пока код не проверяется, только описание состояний)

Файл отправлен на анализ ./VinKekFish_k1_base_20210419_состояния.fmc
./VinKekFish_k1_base_20210419_состояния.fmc.reachability

Состояние "Очищен" доступно из всех состояний, кроме "Уничтожен" в один шаг (и кроме состояния "Очищен")
Состояние "Уничтожен" доступно из всех состояний, кроме "Уничтожен", см. комментарий в файле  по метке 41azmzpX97lq

1.4. В состоянии "не инициализирован" должно соответствовать семантике
	Соответствует. Это начальное состояние без каких-либо инициализаций.

2. Обратить особое внимание на то, указан ли допустимый порядок использования объекта (в зависимости от его состояний; допустимые переходы) и рекомендованный порядок состояний. Они должны быть указаны как в документации по состояниям, так и в понятной программисту-пользователю документации

По метке 6Jm6KpKxbmUs указан рекомендованный и допустимый порядок состояний


см. далее по метке JYuEmoy5MKQk
и потом продолжение ниже

6. Пригодные и непригодные состояния
1. Можно ли (во время исполнения программы) понять, что объект находится в состоянии "Утилизирован" ("уничтожен")? Если нет, то объект должен быть, после утилизации, недоступен.

	Объект недоступен в связи с тем, что утилизация осуществляется в деструкторе. В других состояниях объект всегда пригоден.

2. Можно ли во время исполнения программы понять, что объект находится в нужном для основного использования состоянии?

	Можно. IsInit2 == true и isHaveOutputData == true




## Группа 2
    Не проинциализирован
    Предварительно проинициализирован
    Полностью проинициализирован
    Очищен
    Уничтожен


# Состояния объекта
## Группа 1
    Не готов к криптографическим операциям
    Готов к криптографическим операциям
    В процессе криптографической операции
    Очищен
    Уничтожен

## Группа 2
    Не проинциализирован				2BPxXXosRz9E
    Предварительно проинициализирован
    Полностью проинициализирован
    Очищен								2BPxXXosRz9E
    Уничтожен							2BPxXXosRz9E

## Группа 4
    Данные не готовы
    Данные готовы

# Рекомендуемые переходы между состояниями	6Jm6KpKxbmUs

Рекомендуемый порядок вызовов

    Вызов конструктора VinKekFish_k1_base_20210419
        1: Не готов к криптографическим операциям
        2: Не проинциализирован
    Вызов первого метода инициализации Init1
        1: Не готов к криптографическим операциям
        2: Предварительно проинициализирован
    Вызов второго метода инициализации Init2
        1: Готов к криптографическим операциям
        2: Полностью проинициализирован
    Далее должны следовать вызовы методов-потомков
        1: В процессе криптографической операции и Готов к криптографическим операциям
        2: Полностью проинициализирован
    Если необходимо
        Вызов Clear
            1: Не готов к криптографическим операциям
            2: Не проинциализирован
        Возврат к началу списка (метод Init1)
    Вызов Dispose
        1: Уничтожен
        2: Уничтожен


# Допумстимые состояния

## Начальные состояния
    1:Не готов к криптографическим операциям
    2:Не проинциализирован
    3:Данные не готовы

При вызове методов, переводящих из одного состояния в другое, не допускается одновременный вызов (из другого потока) любого другого метода

В состоянии "В процессе криптографической операции" не допустим вызов других операций, которые пытаются перевести объект в это же состояние

Для обеспечения многопоточности нужно вручную использовать любой объект синхронизации (либо делать вызовы только в одном потоке)

## Конечные состояния

    1:Уничтожен
    2:Уничтожен					NwQt5AuXPfr9
    3:Данные не готовы

# Допустимые переходы		6Jm6KpKxbmUs

Здесь движение от корня к листьям (это допустимые переходы)

## Группа 1
    Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен
    Готов к криптографическим операциям
        В процессе криптографической операции
        Очищен
    В процессе криптографической операции
        Готов к криптографическим операциям
    Очищен
        Не готов к криптографическим операциям
        Уничтожен
    Уничтожен
        _

## Группа 2
    Не проинциализирован
        Предварительно проинициализирован
        Очищен
    Предварительно проинициализирован
        Полностью проинициализирован
        Очищен
    Полностью проинициализирован
        Очищен
    Очищен
        Не проинциализирован
        Уничтожен
    Уничтожен
        _				plSB14TkkHty

## Группа 4
    Любые переходы


JYuEmoy5MKQk
3. Можно ли отличить, в каком состоянии находится объект?  (какие переменные на это указывают?)

2:Полностью проинициализирован соответствует переменная isInited2 = true
Группа 4 представлена переменной isHaveOutputData

Остальные состояния не отличимы.

Переход в состояние "Очищен" эквивалентно переходу в состояние "Не инициализирован"
"Уничтожен" достигается только при недоступности объекта

В этой связи получаем,
isInited1 = false
isInited2 = false
соответствует состоянию "Не инициализирован" до той степени, до которой это нужно узнать для использования

4. Проверить, понятно ли описано, как создавать, использовать и утилизировать объект для конченого программиста-пользователя

	Добавил дополнительную отсылку из комментариев в коде

5. Все ли методы объекта указаны в документации по состояниям?
5.0. Все ли методы перечисленны?
	VinKekFish_k1_base_20210419		указан
	Init1							указан
	Init2							указан
	Clear							указан
	ClearState						указан
	GenStandardPermutationTables	статический, не должен быть указан в состояниях
	CheckPermutationTable			статический
	DoStep							указан
	outputData						указан
	Dispose							указан
	~VinKekFish_k1_base_20210419	указан

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	См. в каждом методе отдельные комментарии



# Переменные в состояниях
    (при переходах в какие состояния изменяется переменная)

## Группа 2

    Не проинциализирован
        isInited1 = false
        isInited2 = false
    Предварительно проинициализирован
        isInited1 = true
        isInited2 = false
    Полностью проинициализирован
        isInited1 = true
        isInited2 = true
    Очищен
        isInited1 = false
        isInited2 = false
    Уничтожен
        isInited1 = false
        isInited2 = false

## Группа 4

    Данные не готовы
        isHaveOutputData = false
    Данные готовы
        isHaveOutputData = true

## Переходы переменных осуществляются в следующих состояниях

### isInited1

    isInited1 = false
        Не проинциализирован
        Очищен
    isInited1 = true
        Предварительно проинициализирован

### isInited2
    isInited2 = false
        Не проинциализирован
        Очищен
    isInited2 = true
        Полностью проинициализирован

# Переходы из состояний
(движение от листьев к корню; вызов в состоянии любого листа, выход из функции - состояние корня, передвижение по узлам происходит внутри функции)

## Конструктор VinKekFish_k1_base_20210419
Переводит объект в состояние
    1:Не готов к криптографическим операциям
    2:Не проинциализирован
    4:Данные не готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Это начальное состояние. Семантике соответствует.
	Все группы состояний: 1, 2, 4

## Метод Init1

## Группа 1
    Не готов к криптографическим операциям
        Не готов к криптографическим операциям
        Очищен
            Готов к криптографическим операциям
## Группа 2
    Предварительно проинициализирован
        Не проинциализирован
            _    (то есть, вызов может быть из состояния "Не проинциализирован")
            Очищен
                _
                Полностью проинициализирован
                Предварительно проинициализирован

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы


5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Есть все три группы.
	Семантике метода соответствуют (хотя и не очень понятны названия)

## Метод Init2
### Группа 1
    Готов к криптографическим операциям
        Не готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Предварительно проинициализирован

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Все три группы есть.
	Семантика:
		1: соответствует (подготовка завершена)
		2: Соответствует
		4: Данные не готовы, т.к. ещё не производилось вычислений.
		Вообще говоря, здесь семантика не совсем соответствует, так как после инициализации данные уже готовы.

		Это ошибка. Исправить.

## Метод ClearState

### Группа 1
    Не готов к криптографическим операциям
        Не готов к криптографическим операциям
        Готов к криптографическим операциям

    Очищен
        Очищен

### Группа 2
    Предварительно проинициализирован
        Предварительно проинициализирован
        Готов к криптографическим операциям

    Очищен
        Очищен

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы
		
5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?

	Есть все три группы.
	Семантика состояния "Очищен" не совсем соответствует. Т.к. это проходное состояние и в него нельзя зайти.
	
	По первой группе, очевидно, соответствует
	По второй группе: ClearState очищает только внутреннее состояние, поэтому может быть сохранено состояние предварительной инициализации
	
	По четвёртой группе: после обнуления состояния данные не готовы: там всё обнулено
		

## Метод Clear

### Группа 1
    Очищен
        Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен

### Группа 2
	Очищен
        Не проинциализирован
        Предварительно проинициализирован
        Полностью проинициализирован
        Очищен

### Группа 4
    Данные не готовы
        Данные не готовы
        Данные готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?

	Все три группы присутствуют.
	Семантика нарушена. Т.к. состояние "Очищен" предполагается проходным
	
	Документация изменена

### GenStandardPermutationTables
    Это статический метод. Не влияет на состояния объектов, может быть вызван независимо от состояний объектов.

### outputData

### Группа 1
    Готов к криптографическим операциям
        Готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Полностью проинициализирован

### Группа 4
    Данные не готовы
        Данные готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Все три группы есть
	Семантике соответствуют.
	После извлечения данных повторное их использование невозможно, поэтому данные будут, действительно, не готовы

### DoStep

### Группа 1
    Готов к криптографическим операциям
        В процессе криптографической операции
            Готов к криптографическим операциям

### Группа 2
    Полностью проинициализирован
        Полностью проинициализирован

### Группа 4
    Данные готовы
        Данные не готовы
        Данные готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Все три группы есть
	Семантике соответствуют
	Данные могут быть готовы, но перезаписаны новыми данными

## Метод Dispose

### Группа 1
    Очищен
        Не готов к криптографическим операциям
        Готов к криптографическим операциям
        Очищен

### Группа 2

    Очищен
        Очищен
            Не проинциализирован
            Предварительно проинициализирован
            Полностью проинициализирован

### Группа 4

    Данные не готовы
        Данные не готовы
        Данные готовы

5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?
	Все три группы есть
	
	Семантика предполагает наличие состояния "Очищен" как проходного.
	То есть семантика несколько нарушено.
	
	После очистки, данные будут не готовы


## Деструктор ~VinKekFish_k1_base_20210419

## Группа 1
    Уничтожен
        Не готов к криптографическим операциям
        Очищен

## Группа 2
    Уничтожен
        Не проинциализирован
        Очищен

## Группа 4
    Данные не готовы
        Данные не готовы


5.1. Есть ли у каждого метода все группы состояний? Соответствуют ли они семантике метода?

Все три группы есть

Семантике соответствуют, кроме состояний "Очищен".
Вызов деструктора возможен только тогда, когда данных уже нет. То есть очистка должна была произойти ранее
